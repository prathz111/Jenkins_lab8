pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                echo 'Building..'
                sh "/home/netman/Documents/Lab9/lab9_py/test1.sh"
            }
        }
        stage('Checkstyle') {
            steps {
		 sh 'pylint --exit-zero /home/netman/Documents/Lab9/lab9_py/netman_netconf_obj2.py > pylint_report.txt || pylint_exit_code=$?'
    script {
        def pylint_exit_code = sh(script: 'echo ${PIPESTATUS[0]}', returnStatus: true)
        if (pylint_exit_code != 0) {
            error('Pylint found violations in netman_netconf_obj2.py. Please fix before proceeding.')
       		 }
            }
        }
        stage('Build Again') {
            steps {
                echo 'Building again...'
                sh "/home/netman/Documents/Lab9/lab9_py/test1.sh"
            }
        }
    }
}

